<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Async</title>
    <script src="IsAsync.min.js"></script>
</head>
<body>

<script>
    let obj = [1, 2, 3, 4, 1, 1, 2, 12, 12, 231, 31, 31231, 12, 45, 56, 575, 8667, 675, 356, 1, 2, 3, 4, 1, 1, 2, 12, 12, 231, 31, 31231, 12, 45, 56, 575, 8667, 675, 356, 1, 2, 3, 4, 1, 1, 2, 12, 12, 231, 31, 31231, 12, 45, 56, 575, 8667, 675, 356, 1, 2, 3, 4, 1, 1, 2, 12, 12, 231, 31, 31231, 12, 45, 56, 575, 8667, 675, 356, 1, 2, 3, 4, 1, 1, 2, 12, 12, 231, 31, 31231, 12, 45, 56, 575, 8667, 675, 356, 1, 2, 3, 4, 1, 1, 2, 12, 12, 231, 31, 31231, 12, 45, 56, 575, 8667, 675, 356, 1, 2, 3, 4, 1, 1, 2, 12, 12, 231, 31, 31231, 12, 45, 56, 575, 8667, 675, 356, 1, 2, 3, 4, 1, 1, 2, 12, 12, 231, 31, 31231, 12, 45, 56, 575, 8667, 675, 356, 1, 2, 3, 4, 1, 1, 2, 12, 12, 231, 31, 31231, 12, 45, 56, 575, 8667, 675, 356, 1, 2, 3, 4, 1, 1, 2, 12, 12, 231, 31, 31231, 12, 45, 56, 575, 8667, 675, 356, 1, 2, 3, 4, 1, 1, 2, 12, 12, 231, 575, 8667, 675, 356, 1, 2, 3, 4, 1, 1, 2, 12, 12, 231, 31, 31231, 12, 45, 56, 575, 8667, 675, 356, 1, 2, 3, 4, 1, 1, 2, 12, 12, 231];
    console.log("下面将要进行比较耗时的操作");


    IsAsync({
        Rely: {
            //此对象内不能接受函数，window，document，只能接受基本数据类型，部分符合标准的数组，对象
            Arr: obj
        },
        Async: function (Rely) {
            //此参数即为上面的传入的依赖对象
            for (let i = 0; i < Rely.Arr.length; i++) {
                for (let s = 0; s < Rely.Arr.length; s++) {
                    //this.message用于向主线程返回数据
                    this.message("[ " + String(i) + " - (" + String(Rely.Arr[i] + i + s * i) + " & " + String(Rely.Arr[s] / 2 + s + i - s / 3) + " )" + " ]");
                }
            }
            //this.Stop()用于结束当前异步线程
            this.Stop();
        },
        Callback: function (data) {
            //此处接受this.message向主线程返回的数据-data
            console.log(data);
        }
    });

//      可以尝试将上面异步部分注释，然后打开下面注释，观察控制台变化

//    for (let i = 0; i < obj.length; i++) {
//        for (let s = 0; s < obj.length; s++) {
//            console.log("[ " + String(i) + " - (" + String(obj[i] + i + s * i) + " & " + String(obj[s] / 2 + s + i - s / 3) + " )" + " ]");
//        }
//    }


    for(let i=0;i<100;i++){
        console.log("我不会被阻塞");
    }
    console.log("我会上面的被阻塞。他会弹100次我才出来");
    console.log("上面的翔算法可能会卡");
</script>
</body>
</html>